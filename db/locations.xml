<?xml version="1.0" encoding="UTF-8"?>
<query>
	<countUserTotalLocation>
		SELECT COUNT(*) as totale FROM spq_risk_unit_disposition as UD
		JOIN spq_risk_location as LO ON (LO.ID_LOCATION = UD.ID_LOCATION)
	</countUserTotalLocation>
	
	<allUserLocation>
		SELECT * FROM spq_risk_unit_disposition as UD
		JOIN spq_risk_location as LO ON (LO.ID_LOCATION = UD.ID_LOCATION)
	</allUserLocation>
	
	<allLocationConnected>
		SELECT LO.* FROM spq_risk_location_connection as LC 
		JOIN spq_risk_location as LO ON (LO.ID_LOCATION = LC.ID_LOCATION_CONNECTED)
		WHERE 
			LC.ID_LOCATION = :id_location
			AND
			LC.ID_LOCATION_CONNECTED IN (SELECT ID_LOCATION FROM spq_risk_unit_disposition UD WHERE UD.ID_GAME = :id_game AND UD.ID_USER = :id_user)
	</allLocationConnected>
	
	<!-- GESTIONE FILTRI -->
	
	<filterByLocationType>
		AND LO.LOCATION_TYPE = :location_type
	</filterByLocationType>
	
	<filterLocation>
		AND LO.id_location NOT IN (:id_locations)
	</filterLocation>
	
	
</query>